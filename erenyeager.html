<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Handmade Crochet Bag - Crochettle</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <div id="header"></div> 

    <main>
        <section class="product-section">
            <div class="container">
                <div class="product-container">
                    <!-- Product Gallery -->
                    <div class="product-gallery">
                        <div class="main-image">
                            <img src="images/eren.jpg" alt="pencil-case" id="mainProductImage">
                        </div>
                        <div class="thumbnail-gallery">
                            <div class="thumbnail active">
                                <img src="images/eren.jpg" alt="pencil-case">
                            </div>
                            <div class="thumbnail">
                                <img src="images/eren-side.jpg" alt="pencil-case-2">
                            </div>
                                                        <div class="thumbnail">
                                <img src="images/eren-back.jpg" alt="pencil-case-2">
                            </div>
                        </div>
                    </div>

                    <!-- Product Info -->
                    <div class="product-info">
                        <div class="availability-badge">
                            <i class="fas fa-star"></i>
                            Only 1 Available - Unique Piece
                        </div>

                        <h1 class="product-title">Eren Yeager Amigurumi</h1>
                        <div class="product-price">2000 DA</div>

                        <div class="product-story">
                            <div class="story-title">
                                <i class="fas fa-heart"></i>
                                The Story Behind This Piece
                            </div>
                            <div class="story-content">
                                This handmade amigurumi is inspired by Eren Yeager, one of the most iconic characters from Attack on Titan. 
                                Each detail‚Äîfrom the uniform to the facial expression‚Äîwas carefully crocheted by hand, bringing the character 
                                to life in soft yarn form. It‚Äôs more than just a doll: it‚Äôs a collectible piece of fan art made with passion, 
                                dedication, and hours of crochet work. Whether you‚Äôre an anime lover, a collector, or searching for a unique gift, 
                                this piece captures the essence of Eren in a warm, handmade way.
                            </div>
                        </div>

                        <div class="product-details">
                            <div class="details-title">
                                <i class="fas fa-info-circle"></i>
                                Product Details
                            </div>
                            <ul class="details-list">
                                <li>
                                    <span class="detail-label">Character:</span>
                                    <span class="detail-value">Eren Yeager (Attack on Titan)</span>
                                </li>
                                <li>
                                    <span class="detail-label">Material:</span>
                                    <span class="detail-value">Safety Eyes, Fiberfill stuffing</span>
                                </li>
                                <li>
                                    <span class="detail-label">Height:</span>
                                    <span class="detail-value">Approx. 18 cm</span>
                                </li>
                                <li>
                                    <span class="detail-label">Colors:</span>
                                    <span class="detail-value">Brown, White, Gray, Black</span>
                                </li>
                                <li>
                                    <span class="detail-label">Care:</span>
                                    <span class="detail-value">Spot clean only, do not machine wash</span>
                                </li>
                                <li>
                                    <span class="detail-label">Made in:</span>
                                    <span class="detail-value">Algeria</span>
                                </li>
                            </ul>
                        </div>

                        <div class="action-buttons">
                            <button class="cta-button primary" onclick="openOrderModal()">
                                <i class="fas fa-shopping-cart"></i>
                                Order This Unique Piece
                            </button>
                            <a href="https://patterns-by-maroua-dcte.vercel.app/" target="_blank" class="cta-button secondary">
                                <i class="fas fa-pattern"></i>
                                Request the Pattern
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Exclusivity Banner -->
        <section class="exclusivity-section">
            <div class="container">
                <div class="exclusivity-content">
                    <h3><i class="fas fa-crown"></i>One-of-a-Kind Guarantee</h3>
                    <p>Each piece is unique and will never be recreated. When it's gone, it's gone forever.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Order Modal -->
    <div id="orderModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeOrderModal()">&times;</span>
            <h2>Order Your Unique Piece</h2>
            
            <div id="successMessage" class="success-message">
                <i class="fas fa-check-circle"></i>
                <h3>Order Submitted Successfully!</h3>
                <p>Thank you for your order. We'll contact you soon to confirm the details.</p>
            </div>

            <form id="orderForm" action="https://formspree.io/f/xqalgpwd" method="POST">
                <div class="form-group">
                    <label for="fullName">Full Name <span class="required">*</span></label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>

                <div class="form-group">
                    <label for="email">Email Address <span class="required">*</span></label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number <span class="required">*</span></label>
                    <input type="tel" id="phone" name="phone" required>
                </div>

                <div class="form-group">
                    <label for="instagram">Instagram Username</label>
                    <input type="text" id="instagram" name="instagram" placeholder="@your_username">
                </div>

                <div class="form-group">
                    <label for="orderItems">What do you want to order? <span class="required">*</span></label>
                    <input type="text" id="orderItems" name="orderItems" value="Eren Yeager Amigurumi" readonly>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="wilaya">Wilaya <span class="required">*</span></label>
                        <select id="wilaya" name="wilaya" required>
                            <option value="">Choisir une wilaya</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="commune">Commune <span class="required">*</span></label>
                        <select id="commune" name="commune" required>
                            <option value="">Choisir d'abord une wilaya</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="deliveryType">Type de livraison <span class="required">*</span></label>
                    <div class="delivery-options">
                        <label class="delivery-option">
                            <input type="radio" name="deliveryType" value="home" required>
                            <span class="delivery-icon">üì¶</span>
                            <span class="delivery-text">Livraison √† domicile</span>
                            <span class="delivery-price" id="homePrice">-</span>
                        </label>
                        <label class="delivery-option">
                            <input type="radio" name="deliveryType" value="office" required>
                            <span class="delivery-icon">üè§</span>
                            <span class="delivery-text">Livraison au bureau</span>
                            <span class="delivery-price" id="officePrice">-</span>
                        </label>
                    </div>
                </div>

                <div class="order-summary" id="orderSummary" style="display: none;">
                    <h4><i class="fas fa-receipt"></i> R√©sum√© de la commande</h4>
                    <div class="summary-item">
                        <span>Article:</span>
                        <span id="summaryItem">Eren Yeager Amigurumi</span>
                    </div>
                    <div class="summary-item">
                        <span>Prix de l'article:</span>
                        <span id="summaryPrice">2000 DA</span>
                    </div>
                    <div class="summary-item">
                        <span>Livraison:</span>
                        <span id="summaryDelivery">-</span>
                    </div>
                    <div class="summary-total">
                        <span>Total:</span>
                        <span id="summaryTotal">-</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="message">Special Instructions (Optional)</label>
                    <textarea id="message" name="message" rows="3" placeholder="Any special requests or questions?"></textarea>
                </div>

                <input type="hidden" name="productName" value="Eren Yeager Amigurumi">
                <input type="hidden" name="productPrice" value="2000 DA">
                <input type="hidden" name="deliveryPrice" id="hiddenDeliveryPrice">
                <input type="hidden" name="totalPrice" id="hiddenTotalPrice">

                <button type="submit" class="submit-button">
                    <i class="fas fa-paper-plane"></i>
                    Submit Order
                </button>
            </form>
        </div>
    </div>
    
    <div id="footer"></div>
    <script src="js/wilaya-data.js"></script>
    <script src="js/script.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Image gallery functionality
        const thumbnails = document.querySelectorAll('.thumbnail img');
        const mainImage = document.getElementById('mainProductImage');

        thumbnails.forEach((thumb) => {
            thumb.addEventListener('click', () => {
                // Update main image src
                mainImage.src = thumb.src;
                mainImage.alt = thumb.alt;

                // Update active thumbnail styling
                document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
                thumb.parentElement.classList.add('active');
            });
        });

        // Modal functionality
        function openOrderModal() {
            document.getElementById('orderModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeOrderModal() {
            document.getElementById('orderModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('orderModal');
            if (event.target === modal) {
                closeOrderModal();
            }
        });

        // Initialize form functionality
        document.addEventListener('DOMContentLoaded', function() {
            const wilayaSelect = document.getElementById('wilaya');
            const communeSelect = document.getElementById('commune');
            const deliveryOptions = document.querySelectorAll('input[name="deliveryType"]');
            const orderSummary = document.getElementById('orderSummary');
            const productPrice = 2000;

            // Populate wilaya select
            populateWilayaSelect(wilayaSelect);

            // Handle wilaya change
            wilayaSelect.addEventListener('change', function() {
                const selectedWilaya = this.value;
                
                if (selectedWilaya) {
                    populateCommuneSelect(communeSelect, selectedWilaya);
                    updateDeliveryPrices(selectedWilaya);
                    communeSelect.disabled = false;
                } else {
                    communeSelect.innerHTML = '<option value="">Choisir d\'abord une wilaya</option>';
                    communeSelect.disabled = true;
                    resetDeliveryPrices();
                }
                updateOrderSummary();
            });

            // Handle delivery type change
            deliveryOptions.forEach(option => {
                option.addEventListener('change', function() {
                    // Update visual selection
                    document.querySelectorAll('.delivery-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.closest('.delivery-option').classList.add('selected');
                    
                    updateOrderSummary();
                });
            });

            function updateDeliveryPrices(wilayaCode) {
                const prices = getDeliveryPrices(wilayaCode);
                document.getElementById('homePrice').textContent = prices.home + ' DA';
                document.getElementById('officePrice').textContent = prices.office + ' DA';
            }

            function resetDeliveryPrices() {
                document.getElementById('homePrice').textContent = '-';
                document.getElementById('officePrice').textContent = '-';
            }

            function updateOrderSummary() {
                const selectedWilaya = wilayaSelect.value;
                const selectedDelivery = document.querySelector('input[name="deliveryType"]:checked');
                
                if (selectedWilaya && selectedDelivery) {
                    const prices = getDeliveryPrices(selectedWilaya);
                    const deliveryPrice = prices[selectedDelivery.value];
                    const total = productPrice + deliveryPrice;
                    
                    document.getElementById('summaryDelivery').textContent = deliveryPrice + ' DA';
                    document.getElementById('summaryTotal').textContent = total + ' DA';
                    
                    // Update hidden fields
                    document.getElementById('hiddenDeliveryPrice').value = deliveryPrice + ' DA';
                    document.getElementById('hiddenTotalPrice').value = total + ' DA';
                    
                    orderSummary.style.display = 'block';
                } else {
                    orderSummary.style.display = 'none';
                }
            }
        });

        // Form submission
        document.getElementById('orderForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            
            // Submit to Formspree
            fetch('https://formspree.io/f/xqalgpwd', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    // Show success message
                    document.getElementById('successMessage').classList.add('show');
                    
                    // Hide form
                    const formElements = this.querySelectorAll('input:not([type="hidden"]), textarea, button, select');
                    formElements.forEach(element => {
                        element.style.display = 'none';
                    });
                    
                    // Auto close modal after 4 seconds
                    setTimeout(() => {
                        closeOrderModal();
                        // Reset form
                        this.reset();
                        document.getElementById('successMessage').classList.remove('show');
                        formElements.forEach(element => {
                            element.style.display = '';
                        });
                        document.getElementById('orderSummary').style.display = 'none';
                    }, 4000);
                } else {
                    alert('There was an error submitting your order. Please try again.');
                }
            }).catch(error => {
                alert('There was an error submitting your order. Please try again.');
            });
        });

        // Add loading animation on page load
        document.addEventListener('DOMContentLoaded', function() {
            document.body.classList.add('loading');
        });

        // Add smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>